(function(){"use strict";try{if(typeof document!="undefined"){var t=document.createElement("style");t.appendChild(document.createTextNode(`.atk-auth-plugin-dialog-wrap{display:flex;align-items:center;justify-content:center;flex-direction:column;height:100%}.atk-auth-plugin-dialog{overflow:hidden;transform:translateY(0) scale(1);animation:atkLoginDialogShowAnim .3s ease-in-out;will-change:transform,opacity,width,height;transition-property:transform,opacity,width,height;transition-duration:.2s;transition-timing-function:cubic-bezier(.25,.1,.25,1);display:flex;flex-direction:column;width:360px;max-height:500px;background:var(--at-color-bg);border-radius:18px}@keyframes atkLoginDialogShowAnim{0%{opacity:0;transform:translateY(15px) scale(1.02)}to{opacity:1;transform:translateY(0) scale(1)}}.atk-auth-plugin-dialog .atk-auth-dialog-title{display:flex;justify-content:space-between;place-items:center;padding:25px 25px 0;font-size:20px;font-weight:500;color:var(--at-color-font)}.atk-auth-plugin-dialog .atk-auth-dialog-title .atk-text{margin:0 10px}.atk-auth-plugin-dialog .atk-auth-dialog-title .atk-icon{display:flex;justify-content:center;place-items:center;height:40px;width:40px;border-radius:50%}.atk-auth-plugin-dialog .atk-auth-dialog-title .atk-icon:hover{background:var(--at-color-bg-grey)}.atk-auth-plugin-dialog .atk-view-wrap{max-height:calc(100% - 65px);overflow-y:auto}.atk-auth-plugin-dialog .atk-methods-page .atk-methods{padding:12px 20px 20px}.atk-auth-plugin-dialog .atk-methods-page .atk-methods .atk-method-item{display:flex;align-items:center;padding:12px 18px;cursor:pointer;border-radius:10px}.atk-auth-plugin-dialog .atk-methods-page .atk-methods .atk-method-item:hover{background:var(--at-color-bg-grey)}.atk-auth-plugin-dialog .atk-methods-page .atk-methods .atk-method-item.atk-methods-loading{pointer-events:none}.atk-auth-plugin-dialog .atk-methods-page .atk-methods .atk-method-item.atk-methods-loading .atk-method-icon{border-radius:4px;background:var(--at-color-bg-grey)}.atk-auth-plugin-dialog .atk-methods-page .atk-methods .atk-method-item.atk-methods-loading .atk-method-text{flex:auto;display:inline-block;height:20px;border-radius:4px;background:var(--at-color-bg-grey)}.atk-auth-plugin-dialog .atk-methods-page .atk-methods .atk-method-item .atk-method-icon{width:50px;height:50px;margin-right:18px;background-repeat:no-repeat;background-size:contain;background-position:center}.atk-auth-plugin-dialog .atk-methods-page .atk-methods .atk-method-item .atk-method-text{font-size:16px;font-weight:500;color:var(--at-color-font)}.atk-auth-plugin-dialog .atk-form{padding:20px 30px}.atk-auth-plugin-dialog .atk-form .atk-form-bottom{padding:5px 0;text-align:center;font-size:14px}.atk-auth-plugin-dialog .atk-form .atk-form-bottom .atk-link{cursor:pointer;text-align:center;color:var(--at-color-main)}.atk-auth-plugin-dialog .atk-form .atk-form-bottom .atk-link:hover{text-decoration:underline}.atk-auth-plugin-dialog .atk-form input{width:100%;padding:10px 20px;margin:5px 0;font-size:16px;border-radius:10px;border:1px solid var(--at-color-bg-grey);background:var(--at-color-bg-grey);color:var(--at-color-font);transition:border-color .2s;outline:none}.atk-auth-plugin-dialog .atk-form input:focus{border-color:var(--at-color-primary)}.atk-auth-plugin-dialog .atk-form label{display:block;font-size:16px;color:var(--at-color-font);margin-bottom:4px;padding:0 5px}.atk-auth-plugin-dialog .atk-form label:not(:first-child){margin-top:8px}.atk-auth-plugin-dialog .atk-form button[type=submit]{width:100%;padding:10px 20px;margin:10px 0;font-size:16px;border-radius:10px;background:var(--at-color-main);color:var(--at-color-bg);cursor:pointer;transition:background .2s;border:0}.atk-auth-plugin-dialog .atk-form button[type=submit]:hover{opacity:.9}.atk-auth-plugin-dialog .atk-form .atk-input-grp{position:relative}.atk-auth-plugin-dialog .atk-form .atk-input-grp>input{padding-right:115px}.atk-auth-plugin-dialog .atk-form .atk-input-grp-btn{position:absolute;right:0;top:50%;transform:translateY(-50%);padding:10px 15px;font-size:14px;color:var(--at-color-main);cursor:pointer}.atk-auth-plugin-dialog[data-dialog-name=merge]{background-size:100% auto;background-position:center top;background-repeat:no-repeat;background-image:url('data:image/svg+xml,<svg fill="none" height="159" viewBox="0 0 390 159" width="390" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><linearGradient id="a" gradientUnits="userSpaceOnUse" x1="195" x2="195" y1="0" y2="159"><stop offset="0" stop-color="%23f6f0fe"/><stop offset=".835" stop-color="%23f6f0fe" stop-opacity="0"/></linearGradient><clipPath id="b"><path d="m0 0h390v159h-390z"/></clipPath><g clip-path="url(%23b)"><path d="m0 0h390v159h-390z" fill="url(%23a)"/><g clip-rule="evenodd" fill="%23743fc8" fill-rule="evenodd"><path d="m76.0859 23.5c-1.5187 0-2.75 1.2312-2.75 2.75s1.2313 2.75 2.75 2.75c1.5188 0 2.75-1.2312 2.75-2.75s-1.2312-2.75-2.75-2.75zm-5.5 2.75c0-3.0376 2.4625-5.5 5.5-5.5 3.0376 0 5.5 2.4624 5.5 5.5s-2.4624 5.5-5.5 5.5c-3.0375 0-5.5-2.4624-5.5-5.5z"/><path d="m76.0859 51c-1.5187 0-2.75 1.2312-2.75 2.75s1.2313 2.75 2.75 2.75c1.5188 0 2.75-1.2312 2.75-2.75s-1.2312-2.75-2.75-2.75zm-5.5 2.75c0-3.0376 2.4625-5.5 5.5-5.5 3.0376 0 5.5 2.4624 5.5 5.5s-2.4624 5.5-5.5 5.5c-3.0375 0-5.5-2.4624-5.5-5.5z"/><path d="m76.0859 29c.7594 0 1.375.6156 1.375 1.375v19.25c0 .7594-.6156 1.375-1.375 1.375s-1.375-.6156-1.375-1.375v-19.25c0-.7594.6156-1.375 1.375-1.375z"/><path d="m98.0859 40c-1.5187 0-2.75 1.2312-2.75 2.75s1.2313 2.75 2.75 2.75c1.5188 0 2.7501-1.2312 2.7501-2.75s-1.2313-2.75-2.7501-2.75zm-5.5 2.75c0-3.0376 2.4625-5.5 5.5-5.5 3.0381 0 5.5001 2.4624 5.5001 5.5s-2.462 5.5-5.5001 5.5c-3.0375 0-5.5-2.4624-5.5-5.5z"/><path d="m76.0859 29c.7594 0 1.375.6156 1.375 1.375 0 3.4986 2.013 6.2043 5.1762 8.1022 3.1845 1.9107 7.3979 2.8978 11.3238 2.8978.7594 0 1.375.6156 1.375 1.375s-.6156 1.375-1.375 1.375c-4.324 0-9.0482-1.0754-12.7386-3.2897-3.7118-2.2271-6.5114-5.7089-6.5114-10.4603 0-.7594.6156-1.375 1.375-1.375z"/><path d="m144 13.5c-.828 0-1.5.6716-1.5 1.5s.672 1.5 1.5 1.5 1.5-.6716 1.5-1.5-.672-1.5-1.5-1.5zm-3 1.5c0-1.6569 1.343-3 3-3s3 1.3431 3 3-1.343 3-3 3-3-1.3431-3-3z" fill-opacity=".5"/><path d="m144 28.5c-.828 0-1.5.6716-1.5 1.5s.672 1.5 1.5 1.5 1.5-.6716 1.5-1.5-.672-1.5-1.5-1.5zm-3 1.5c0-1.6569 1.343-3 3-3s3 1.3431 3 3-1.343 3-3 3-3-1.3431-3-3z" fill-opacity=".5"/><path d="m144 16.5c.414 0 .75.3358.75.75v10.5c0 .4142-.336.75-.75.75s-.75-.3358-.75-.75v-10.5c0-.4142.336-.75.75-.75z" fill-opacity=".5"/><path d="m156 22.5c-.828 0-1.5.6716-1.5 1.5s.672 1.5 1.5 1.5 1.5-.6716 1.5-1.5-.672-1.5-1.5-1.5zm-3 1.5c0-1.6569 1.343-3 3-3s3 1.3431 3 3-1.343 3-3 3-3-1.3431-3-3z" fill-opacity=".5"/><path d="m144 16.5c.414 0 .75.3358.75.75 0 1.9083 1.098 3.3841 2.823 4.4194 1.737 1.0422 4.036 1.5806 6.177 1.5806.414 0 .75.3358.75.75s-.336.75-.75.75c-2.359 0-4.935-.5866-6.948-1.7944-2.025-1.2147-3.552-3.1139-3.552-5.7056 0-.4142.336-.75.75-.75z" fill-opacity=".5"/><path d="m24.5 58.2857c-.6904 0-1.25.5756-1.25 1.2857s.5596 1.2857 1.25 1.2857 1.25-.5756 1.25-1.2857-.5596-1.2857-1.25-1.2857zm-2.5 1.2857c0-1.4201 1.1193-2.5714 2.5-2.5714s2.5 1.1513 2.5 2.5714c0 1.4202-1.1193 2.5715-2.5 2.5715s-2.5-1.1513-2.5-2.5715z" fill-opacity=".3"/><path d="m24.5 71.1429c-.6904 0-1.25.5756-1.25 1.2857s.5596 1.2857 1.25 1.2857 1.25-.5756 1.25-1.2857-.5596-1.2857-1.25-1.2857zm-2.5 1.2857c0-1.4202 1.1193-2.5715 2.5-2.5715s2.5 1.1513 2.5 2.5715c0 1.4201-1.1193 2.5714-2.5 2.5714s-2.5-1.1513-2.5-2.5714z" fill-opacity=".3"/><path d="m24.5 60.8571c.3452 0 .625.2879.625.6429v9c0 .355-.2798.6429-.625.6429s-.625-.2879-.625-.6429v-9c0-.355.2798-.6429.625-.6429z" fill-opacity=".3"/><path d="m34.5 66c-.6904 0-1.25.5756-1.25 1.2857s.5596 1.2857 1.25 1.2857 1.25-.5756 1.25-1.2857-.5596-1.2857-1.25-1.2857zm-2.5 1.2857c0-1.4201 1.1193-2.5714 2.5-2.5714s2.5 1.1513 2.5 2.5714c0 1.4202-1.1193 2.5714-2.5 2.5714s-2.5-1.1512-2.5-2.5714z" fill-opacity=".3"/><path d="m24.5 60.8571c.3452 0 .625.2879.625.6429 0 1.6357.915 2.9007 2.3528 3.788 1.4475.8934 3.3627 1.3549 5.1472 1.3549.3452 0 .625.2878.625.6428 0 .3551-.2798.6429-.625.6429-1.9655 0-4.1128-.5028-5.7903-1.5381-1.6872-1.0412-2.9597-2.6691-2.9597-4.8905 0-.355.2798-.6429.625-.6429z" fill-opacity=".3"/><path d="m201.222 41.1429c-.613 0-1.111.5116-1.111 1.1428s.498 1.1429 1.111 1.1429c.614 0 1.111-.5117 1.111-1.1429s-.497-1.1428-1.111-1.1428zm-2.222 1.1428c0-1.2624.995-2.2857 2.222-2.2857 1.228 0 2.222 1.0233 2.222 2.2857s-.994 2.2857-2.222 2.2857c-1.227 0-2.222-1.0233-2.222-2.2857z" fill-opacity=".2"/><path d="m201.222 52.5714c-.613 0-1.111.5117-1.111 1.1429s.498 1.1428 1.111 1.1428c.614 0 1.111-.5116 1.111-1.1428s-.497-1.1429-1.111-1.1429zm-2.222 1.1429c0-1.2624.995-2.2857 2.222-2.2857 1.228 0 2.222 1.0233 2.222 2.2857s-.994 2.2857-2.222 2.2857c-1.227 0-2.222-1.0233-2.222-2.2857z" fill-opacity=".2"/><path d="m201.222 43.4286c.307 0 .556.2558.556.5714v8c0 .3156-.249.5714-.556.5714s-.555-.2558-.555-.5714v-8c0-.3156.248-.5714.555-.5714z" fill-opacity=".2"/><path d="m210.111 48c-.614 0-1.111.5117-1.111 1.1429 0 .6311.497 1.1428 1.111 1.1428s1.111-.5117 1.111-1.1428c0-.6312-.497-1.1429-1.111-1.1429zm-2.222 1.1429c0-1.2624.995-2.2858 2.222-2.2858s2.222 1.0234 2.222 2.2858c0 1.2623-.995 2.2857-2.222 2.2857s-2.222-1.0234-2.222-2.2857z" fill-opacity=".2"/><path d="m201.222 43.4286c.307 0 .556.2558.556.5714 0 1.454.813 2.5784 2.091 3.3671 1.287.7941 2.989 1.2043 4.575 1.2043.307 0 .556.2559.556.5715 0 .3155-.249.5714-.556.5714-1.747 0-3.655-.4469-5.146-1.3672-1.5-.9255-2.631-2.3725-2.631-4.3471 0-.3156.248-.5714.555-.5714z" fill-opacity=".2"/><path d="m254.222 24.1429c-.613 0-1.111.5116-1.111 1.1428s.498 1.1429 1.111 1.1429c.614 0 1.111-.5117 1.111-1.1429s-.497-1.1428-1.111-1.1428zm-2.222 1.1428c0-1.2624.995-2.2857 2.222-2.2857 1.228 0 2.222 1.0233 2.222 2.2857s-.994 2.2857-2.222 2.2857c-1.227 0-2.222-1.0233-2.222-2.2857z" fill-opacity=".7"/><path d="m254.222 35.5714c-.613 0-1.111.5117-1.111 1.1429s.498 1.1428 1.111 1.1428c.614 0 1.111-.5116 1.111-1.1428s-.497-1.1429-1.111-1.1429zm-2.222 1.1429c0-1.2624.995-2.2857 2.222-2.2857 1.228 0 2.222 1.0233 2.222 2.2857s-.994 2.2857-2.222 2.2857c-1.227 0-2.222-1.0233-2.222-2.2857z" fill-opacity=".7"/><path d="m254.222 26.4286c.307 0 .556.2558.556.5714v8c0 .3156-.249.5714-.556.5714s-.555-.2558-.555-.5714v-8c0-.3156.248-.5714.555-.5714z" fill-opacity=".7"/><path d="m263.111 31c-.614 0-1.111.5117-1.111 1.1429 0 .6311.497 1.1428 1.111 1.1428s1.111-.5117 1.111-1.1428c0-.6312-.497-1.1429-1.111-1.1429zm-2.222 1.1429c0-1.2624.995-2.2858 2.222-2.2858s2.222 1.0234 2.222 2.2858c0 1.2623-.995 2.2857-2.222 2.2857s-2.222-1.0234-2.222-2.2857z" fill-opacity=".7"/><path d="m254.222 26.4286c.307 0 .556.2558.556.5714 0 1.454.813 2.5784 2.091 3.3671 1.287.7941 2.989 1.2043 4.575 1.2043.307 0 .556.2559.556.5715 0 .3155-.249.5714-.556.5714-1.747 0-3.655-.4469-5.146-1.3672-1.5-.9255-2.631-2.3725-2.631-4.3471 0-.3156.248-.5714.555-.5714z" fill-opacity=".7"/><path d="m300-2.42857c-1.933 0-3.5 1.598982-3.5 3.57143 0 1.97244 1.567 3.57143 3.5 3.57143s3.5-1.59899 3.5-3.57143c0-1.972448-1.567-3.57143-3.5-3.57143zm-7 3.57143c0-3.94489 3.134-7.14286 7-7.14286s7 3.19797 7 7.14286-3.134 7.14285-7 7.14285-7-3.19796-7-7.14285z" fill-opacity=".7"/><path d="m300 33.2857c-1.933 0-3.5 1.599-3.5 3.5714 0 1.9725 1.567 3.5715 3.5 3.5715s3.5-1.599 3.5-3.5715c0-1.9724-1.567-3.5714-3.5-3.5714zm-7 3.5714c0-3.9448 3.134-7.1428 7-7.1428s7 3.198 7 7.1428c0 3.9449-3.134 7.1429-7 7.1429s-7-3.198-7-7.1429z" fill-opacity=".7"/><path d="m300 4.71429c.966 0 1.75.79949 1.75 1.78571v25c0 .9862-.784 1.7857-1.75 1.7857s-1.75-.7995-1.75-1.7857v-25c0-.98622.784-1.78571 1.75-1.78571z" fill-opacity=".7"/><path d="m328 19c-1.933 0-3.5 1.599-3.5 3.5714 0 1.9725 1.567 3.5715 3.5 3.5715s3.5-1.599 3.5-3.5715c0-1.9724-1.567-3.5714-3.5-3.5714zm-7 3.5714c0-3.9449 3.134-7.1428 7-7.1428s7 3.1979 7 7.1428-3.134 7.1429-7 7.1429-7-3.198-7-7.1429z" fill-opacity=".7"/><path d="m300 4.71429c.966 0 1.75.79949 1.75 1.78571 0 4.5436 2.562 8.0575 6.588 10.5223 4.053 2.4815 9.415 3.7634 14.412 3.7634.966 0 1.75.7995 1.75 1.7857 0 .9863-.784 1.7857-1.75 1.7857-5.503 0-11.516-1.3966-16.213-4.2723-4.724-2.8923-8.287-7.4142-8.287-13.5848 0-.98622.784-1.78571 1.75-1.78571z" fill-opacity=".7"/><path d="m360.333 34.2143c-.644 0-1.166.5436-1.166 1.2143 0 .6706.522 1.2143 1.166 1.2143.645 0 1.167-.5437 1.167-1.2143 0-.6707-.522-1.2143-1.167-1.2143zm-2.333 1.2143c0-1.3413 1.045-2.4286 2.333-2.4286 1.289 0 2.334 1.0873 2.334 2.4286 0 1.3412-1.045 2.4285-2.334 2.4285-1.288 0-2.333-1.0873-2.333-2.4285z" fill-opacity=".7"/><path d="m360.333 46.3571c-.644 0-1.166.5437-1.166 1.2143 0 .6707.522 1.2143 1.166 1.2143.645 0 1.167-.5436 1.167-1.2143 0-.6706-.522-1.2143-1.167-1.2143zm-2.333 1.2143c0-1.3412 1.045-2.4285 2.333-2.4285 1.289 0 2.334 1.0873 2.334 2.4285 0 1.3413-1.045 2.4286-2.334 2.4286-1.288 0-2.333-1.0873-2.333-2.4286z" fill-opacity=".7"/><path d="m360.333 36.6429c.322 0 .584.2718.584.6071v8.5c0 .3353-.262.6071-.584.6071s-.583-.2718-.583-.6071v-8.5c0-.3353.261-.6071.583-.6071z" fill-opacity=".7"/><path d="m369.667 41.5c-.645 0-1.167.5437-1.167 1.2143s.522 1.2143 1.167 1.2143c.644 0 1.166-.5437 1.166-1.2143s-.522-1.2143-1.166-1.2143zm-2.334 1.2143c0-1.3413 1.045-2.4286 2.334-2.4286 1.288 0 2.333 1.0873 2.333 2.4286 0 1.3412-1.045 2.4286-2.333 2.4286-1.289 0-2.334-1.0874-2.334-2.4286z" fill-opacity=".7"/><path d="m360.333 36.6429c.322 0 .584.2718.584.6071 0 1.5448.854 2.7395 2.196 3.5776 1.351.8437 3.138 1.2795 4.804 1.2795.322 0 .583.2719.583.6072s-.261.6071-.583.6071c-1.835 0-3.839-.4748-5.405-1.4526-1.574-.9833-2.762-2.5208-2.762-4.6188 0-.3353.261-.6071.583-.6071z" fill-opacity=".7"/></g></g></svg>')}.atk-auth-plugin-dialog[data-dialog-name=merge] .atk-auth-dialog-title{padding-top:50px;color:#361e6a}.atk-auth-plugin-dialog[data-dialog-name=merge] .atk-text:first-of-type{color:#472a84}.atk-auth-plugin-dialog .atk-merge-confirm-page{padding:15px 35px 30px}.atk-auth-plugin-dialog .atk-merge-confirm-page .atk-text{font-size:16px;color:var(--at-color-font);margin-bottom:20px}.atk-auth-plugin-dialog .atk-merge-confirm-page .atk-usernames{display:flex;flex-direction:column;color:var(--at-color-font);margin-bottom:20px}.atk-auth-plugin-dialog .atk-merge-confirm-page .atk-usernames .atk-item{border-radius:10px;padding:10px 15px;margin:5px 0;display:flex;justify-content:space-between;place-items:center;cursor:pointer;border:1px solid var(--at-color-border)}.atk-auth-plugin-dialog .atk-merge-confirm-page .atk-usernames .atk-item.active{background:var(--at-color-bg-grey)}.atk-auth-plugin-dialog .atk-merge-confirm-page .atk-usernames .atk-item .atk-username{flex:auto;text-align:center}.atk-auth-plugin-dialog .atk-merge-confirm-page .atk-dialog-footer{display:flex;justify-content:space-between;place-items:center;margin-top:20px}.atk-auth-plugin-dialog .atk-merge-confirm-page .atk-dialog-footer .atk-btn{padding:10px 20px;font-size:16px;border-radius:10px;cursor:pointer}.atk-auth-plugin-dialog .atk-merge-confirm-page .atk-dialog-footer .atk-btn:hover{opacity:.9}.atk-auth-plugin-dialog .atk-merge-confirm-page .atk-dialog-footer .atk-btn.atk-btn-no{background:var(--at-color-bg-grey);color:var(--at-color-font)}.atk-auth-plugin-dialog .atk-merge-confirm-page .atk-dialog-footer .atk-btn.atk-btn-yes{background:var(--at-color-main);color:var(--at-color-bg)}.atk-auth-plugin-dialog .atk-merge-confirm-page .atk-dialog-footer .atk-btn.atk-btn-yes.disabled{opacity:.5;cursor:not-allowed}.atk-main-editor .atk-editor-user-wrap{margin-top:10px}.atk-main-editor .atk-editor-user-wrap .atk-editor-user{display:inline-flex;flex-direction:row;place-items:center;cursor:pointer;border-radius:3px;padding:0 10px}.atk-main-editor .atk-editor-user-wrap .atk-editor-user .atk-user-btn{display:flex;place-items:center;justify-content:center;padding:5px;border-radius:3px}.atk-main-editor .atk-editor-user-wrap .atk-editor-user .atk-user-btn:hover{background:var(--at-color-bg-grey-transl)}.atk-main-editor .atk-editor-user-wrap .atk-editor-user .atk-user-btn:not(:last-child){margin-right:5px}.atk-main-editor .atk-editor-user-wrap .atk-editor-user .atk-user-profile-btn{padding-left:12px;padding-right:12px}.atk-main-editor .atk-editor-user-wrap .atk-editor-user .atk-name{color:var(--at-color-font)}.atk-main-editor .atk-editor-user-wrap .atk-editor-user .atk-avatar{width:20px;height:20px;border-radius:50%;margin-right:15px;background-position:center;background-size:cover;background-color:#d5d5d5}.atk-main-editor .atk-editor-user-wrap .atk-editor-user .atk-logout{height:100%;color:var(--at-color-font);font-size:1.3em;display:flex;place-items:center;justify-content:center}`)),document.head.appendChild(t)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
(function(v,A){typeof exports=="object"&&typeof module!="undefined"?A(exports):typeof define=="function"&&define.amd?define(["exports"],A):(v=typeof globalThis!="undefined"?globalThis:v||self,A(v["artalk-plugin-auth"]=v["artalk-plugin-auth"]||{}))})(this,function(v){"use strict";var rn=Object.defineProperty,on=Object.defineProperties;var an=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var it=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable;var nt=(v,A,b)=>A in v?rn(v,A,{enumerable:!0,configurable:!0,writable:!0,value:b}):v[A]=b,le=(v,A)=>{for(var b in A||(A={}))it.call(A,b)&&nt(v,b,A[b]);if(ve)for(var b of ve(A))st.call(A,b)&&nt(v,b,A[b]);return v},Be=(v,A)=>on(v,an(A));var be=(v,A)=>{var b={};for(var H in v)it.call(v,H)&&A.indexOf(H)<0&&(b[H]=v[H]);if(v!=null&&ve)for(var H of ve(v))A.indexOf(H)<0&&st.call(v,H)&&(b[H]=v[H]);return b};var te=(v,A,b)=>new Promise((H,X)=>{var re=M=>{try{K(b.next(M))}catch(Z){X(Z)}},I=M=>{try{K(b.throw(M))}catch(Z){X(Z)}},K=M=>M.done?H(M.value):Promise.resolve(M.value).then(re,I);K((b=b.apply(v,A)).next())});var tt;const A=(e,t)=>e===t,b=Symbol("solid-proxy"),H=Symbol("solid-track"),X={equals:A};let re=qe;const I=1,K=2,M={owned:null,cleanups:null,context:null,owner:null},Z={};var D=null;let ke=null,lt=null,C=null,O=null,q=null,oe=0;function ae(e,t){const n=C,i=D,l=e.length===0,s=t===void 0?i:t,o=l?M:{owned:null,cleanups:null,context:s?s.context:null,owner:s},r=l?e:()=>e(()=>G(()=>de(o)));D=o,C=null;try{return W(r,!0)}finally{C=n,D=i}}function B(e,t){t=t?Object.assign({},X,t):X;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},i=l=>(typeof l=="function"&&(l=l(n.value)),je(n,l));return[Me.bind(n),i]}function He(e,t,n){const i=ue(e,t,!0,I);Q(i)}function P(e,t,n){const i=ue(e,t,!1,I);Q(i)}function Ue(e,t,n){re=ft;const i=ue(e,t,!1,I);i.user=!0,q?q.push(i):Q(i)}function j(e,t,n){n=n?Object.assign({},X,n):X;const i=ue(e,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=n.equals||void 0,Q(i),Me.bind(i)}function rt(e){return e&&typeof e=="object"&&"then"in e}function Ie(e,t,n){let i,l,s;arguments.length===2&&typeof t=="object"||arguments.length===1?(i=!0,l=e,s={}):(i=e,l=t,s={});let o=null,r=Z,a=!1,u="initialValue"in s,f=typeof i=="function"&&j(i);const c=new Set,[d,$]=(s.storage||B)(s.initialValue),[m,_]=B(void 0),[w,k]=B(void 0,{equals:!1}),[L,h]=B(u?"ready":"unresolved");function p(y,E,T,ee){return o===y&&(o=null,ee!==void 0&&(u=!0),(y===r||E===r)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(ee,{value:E})),r=Z,U(E,T)),E}function U(y,E){W(()=>{E===void 0&&$(()=>y),h(E!==void 0?"errored":u?"ready":"unresolved"),_(E);for(const T of c.keys())T.decrement();c.clear()},!1)}function Y(){const y=at,E=d(),T=m();if(T!==void 0&&!o)throw T;return C&&!C.user&&y&&He(()=>{w(),o&&(y.resolved||c.has(y)||(y.increment(),c.add(y)))}),E}function N(y=!0){if(y!==!1&&a)return;a=!1;const E=f?f():i;if(E==null||E===!1){p(o,G(d));return}const T=r!==Z?r:G(()=>l(E,{value:d(),refetching:y}));return rt(T)?(o=T,"value"in T?(T.status==="success"?p(o,T.value,void 0,E):p(o,void 0,_e(T.value),E),T):(a=!0,queueMicrotask(()=>a=!1),W(()=>{h(u?"refreshing":"pending"),k()},!1),T.then(ee=>p(T,ee,void 0,E),ee=>p(T,void 0,_e(ee),E)))):(p(o,T,void 0,E),T)}return Object.defineProperties(Y,{state:{get:()=>L()},error:{get:()=>m()},loading:{get(){const y=L();return y==="pending"||y==="refreshing"}},latest:{get(){if(!u)return Y();const y=m();if(y&&!o)throw y;return d()}}}),f?He(()=>N(!1)):N(!1),[Y,{refetch:N,mutate:$}]}function ot(e){return W(e,!1)}function G(e){if(C===null)return e();const t=C;C=null;try{return e()}finally{C=t}}function Ne(e){return D===null||(D.cleanups===null?D.cleanups=[e]:D.cleanups.push(e)),e}function ye(){return C}let at;function Me(){if(this.sources&&this.state)if(this.state===I)Q(this);else{const e=O;O=null,W(()=>fe(this),!1),O=e}if(C){const e=this.observers?this.observers.length:0;C.sources?(C.sources.push(this),C.sourceSlots.push(e)):(C.sources=[this],C.sourceSlots=[e]),this.observers?(this.observers.push(C),this.observerSlots.push(C.sources.length-1)):(this.observers=[C],this.observerSlots=[C.sources.length-1])}return this.value}function je(e,t,n){let i=e.value;return(!e.comparator||!e.comparator(i,t))&&(e.value=t,e.observers&&e.observers.length&&W(()=>{for(let l=0;l<e.observers.length;l+=1){const s=e.observers[l],o=ke&&ke.running;o&&ke.disposed.has(s),(o?!s.tState:!s.state)&&(s.pure?O.push(s):q.push(s),s.observers&&Ve(s)),o||(s.state=I)}if(O.length>1e6)throw O=[],new Error},!1)),t}function Q(e){if(!e.fn)return;de(e);const t=oe;ut(e,e.value,t)}function ut(e,t,n){let i;const l=D,s=C;C=D=e;try{i=e.fn(t)}catch(o){return e.pure&&(e.state=I,e.owned&&e.owned.forEach(de),e.owned=null),e.updatedAt=n+1,Re(o)}finally{C=s,D=l}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?je(e,i):e.value=i,e.updatedAt=n)}function ue(e,t,n,i=I,l){const s={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:D,context:D?D.context:null,pure:n};return D===null||D!==M&&(D.owned?D.owned.push(s):D.owned=[s]),s}function ce(e){if(e.state===0)return;if(e.state===K)return fe(e);if(e.suspense&&G(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<oe);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===I)Q(e);else if(e.state===K){const i=O;O=null,W(()=>fe(e,t[0]),!1),O=i}}function W(e,t){if(O)return e();let n=!1;t||(O=[]),q?n=!0:q=[],oe++;try{const i=e();return ct(n),i}catch(i){n||(q=null),O=null,Re(i)}}function ct(e){if(O&&(qe(O),O=null),e)return;const t=q;q=null,t.length&&W(()=>re(t),!1)}function qe(e){for(let t=0;t<e.length;t++)ce(e[t])}function ft(e){let t,n=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[n++]=i:ce(i)}for(t=0;t<n;t++)ce(e[t])}function fe(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const i=e.sources[n];if(i.sources){const l=i.state;l===I?i!==t&&(!i.updatedAt||i.updatedAt<oe)&&ce(i):l===K&&fe(i,t)}}}function Ve(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=K,n.pure?O.push(n):q.push(n),n.observers&&Ve(n))}}function de(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),i=e.sourceSlots.pop(),l=n.observers;if(l&&l.length){const s=l.pop(),o=n.observerSlots.pop();i<l.length&&(s.sourceSlots[o]=i,l[i]=s,n.observerSlots[i]=o)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)de(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function _e(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Re(e,t=D){throw _e(e)}const dt=Symbol("fallback");function Fe(e){for(let t=0;t<e.length;t++)e[t]()}function gt(e,t,n={}){let i=[],l=[],s=[],o=0,r=t.length>1?[]:null;return Ne(()=>Fe(s)),()=>{let a=e()||[],u=a.length,f,c;return a[H],G(()=>{let $,m,_,w,k,L,h,p,U;if(u===0)o!==0&&(Fe(s),s=[],i=[],l=[],o=0,r&&(r=[])),n.fallback&&(i=[dt],l[0]=ae(Y=>(s[0]=Y,n.fallback())),o=1);else if(o===0){for(l=new Array(u),c=0;c<u;c++)i[c]=a[c],l[c]=ae(d);o=u}else{for(_=new Array(u),w=new Array(u),r&&(k=new Array(u)),L=0,h=Math.min(o,u);L<h&&i[L]===a[L];L++);for(h=o-1,p=u-1;h>=L&&p>=L&&i[h]===a[p];h--,p--)_[p]=l[h],w[p]=s[h],r&&(k[p]=r[h]);for($=new Map,m=new Array(p+1),c=p;c>=L;c--)U=a[c],f=$.get(U),m[c]=f===void 0?-1:f,$.set(U,c);for(f=L;f<=h;f++)U=i[f],c=$.get(U),c!==void 0&&c!==-1?(_[c]=l[f],w[c]=s[f],r&&(k[c]=r[f]),c=m[c],$.set(U,c)):s[f]();for(c=L;c<u;c++)c in _?(l[c]=_[c],s[c]=w[c],r&&(r[c]=k[c],r[c](c))):l[c]=ae(d);l=l.slice(0,o=u),i=a.slice(0)}return l});function d($){if(s[c]=$,r){const[m,_]=B(c);return r[c]=_,t(a[c],m)}return t(a[c])}}}function x(e,t){return G(()=>e(t||{}))}const ht=e=>`Stale read from <${e}>.`;function $t(e){const t="fallback"in e&&{fallback:()=>e.fallback};return j(gt(()=>e.each,e.children,t||void 0))}function Ae(e){const t=e.keyed,n=j(()=>e.when,void 0,{equals:(i,l)=>t?i===l:!i==!l});return j(()=>{const i=n();if(i){const l=e.children;return typeof l=="function"&&l.length>0?G(()=>l(t?i:()=>{if(!G(n))throw ht("Show");return e.when})):l}return e.fallback},void 0,void 0)}function mt(e,t,n){let i=n.length,l=t.length,s=i,o=0,r=0,a=t[l-1].nextSibling,u=null;for(;o<l||r<s;){if(t[o]===n[r]){o++,r++;continue}for(;t[l-1]===n[s-1];)l--,s--;if(l===o){const f=s<i?r?n[r-1].nextSibling:n[s-r]:a;for(;r<s;)e.insertBefore(n[r++],f)}else if(s===r)for(;o<l;)(!u||!u.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[s-1]&&n[r]===t[l-1]){const f=t[--l].nextSibling;e.insertBefore(n[r++],t[o++].nextSibling),e.insertBefore(n[--s],f),t[l]=n[s]}else{if(!u){u=new Map;let c=r;for(;c<s;)u.set(n[c],c++)}const f=u.get(t[o]);if(f!=null)if(r<f&&f<s){let c=o,d=1,$;for(;++c<l&&c<s&&!(($=u.get(t[c]))==null||$!==f+d);)d++;if(d>f-r){const m=t[o];for(;r<f;)e.insertBefore(n[r++],m)}else e.replaceChild(n[r++],t[o++])}else o++;else t[o++].remove()}}}const Ke="_$DX_DELEGATE";function Ge(e,t,n,i={}){let l;return ae(s=>{l=s,t===document?e():g(t,e(),t.firstChild?null:void 0,n)},i.owner),()=>{l(),t.textContent=""}}function S(e,t,n){let i;const l=()=>{const o=document.createElement("template");return o.innerHTML=e,o.content.firstChild},s=()=>(i||(i=l())).cloneNode(!0);return s.cloneNode=s,s}function V(e,t=window.document){const n=t[Ke]||(t[Ke]=new Set);for(let i=0,l=e.length;i<l;i++){const s=e[i];n.has(s)||(n.add(s),t.addEventListener(s,pt))}}function R(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Ce(e,t,n,i){Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n}function g(e,t,n,i){if(n!==void 0&&!i&&(i=[]),typeof t!="function")return ge(e,t,i,n);P(l=>ge(e,t(),l,n),i)}function pt(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const i=n[t];if(i&&!n.disabled){const l=n[`${t}Data`];if(l!==void 0?i.call(n,l,e):i.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function ge(e,t,n,i,l){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,o=i!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===n))return n;if(o){let r=n[0];r&&r.nodeType===3?r.data!==t&&(r.data=t):r=document.createTextNode(t),n=J(e,n,i,r)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean")n=J(e,n,i);else{if(s==="function")return P(()=>{let r=t();for(;typeof r=="function";)r=r();n=ge(e,r,n,i)}),()=>n;if(Array.isArray(t)){const r=[],a=n&&Array.isArray(n);if(Se(r,t,n,l))return P(()=>n=ge(e,r,n,i,!0)),()=>n;if(r.length===0){if(n=J(e,n,i),o)return n}else a?n.length===0?We(e,r,i):mt(e,n,r):(n&&J(e),We(e,r));n=r}else if(t.nodeType){if(Array.isArray(n)){if(o)return n=J(e,n,i,t);J(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Se(e,t,n,i){let l=!1;for(let s=0,o=t.length;s<o;s++){let r=t[s],a=n&&n[e.length],u;if(!(r==null||r===!0||r===!1))if((u=typeof r)=="object"&&r.nodeType)e.push(r);else if(Array.isArray(r))l=Se(e,r,a)||l;else if(u==="function")if(i){for(;typeof r=="function";)r=r();l=Se(e,Array.isArray(r)?r:[r],Array.isArray(a)?a:[a])||l}else e.push(r),l=!0;else{const f=String(r);a&&a.nodeType===3&&a.data===f?e.push(a):e.push(document.createTextNode(f))}}return l}function We(e,t,n=null){for(let i=0,l=t.length;i<l;i++)e.insertBefore(t[i],n)}function J(e,t,n,i){if(n===void 0)return e.textContent="";const l=i||document.createTextNode("");if(t.length){let s=!1;for(let o=t.length-1;o>=0;o--){const r=t[o];if(l!==r){const a=r.parentNode===e;!s&&!o?a?e.replaceChild(l,r):e.insertBefore(l,n):a&&r.remove()}else s=!0}}else e.insertBefore(l,n);return[l]}var wt=S('<div class=atk-auth-dialog-title><div class=atk-text></div><div class="atk-close atk-icon-close atk-icon">'),vt=S('<div class="atk-back-btn atk-icon atk-icon-arrow-left">');const bt=e=>{const{title:t,showBackBtn:n,onBack:i,onClose:l}=e;return(()=>{var s=wt(),o=s.firstChild,r=o.nextSibling;return g(s,(()=>{var a=j(()=>!!(n!=null&&n()));return()=>a()&&(()=>{var u=vt();return Ce(u,"click",i),u})()})(),o),g(o,t),r.$$click=()=>l(),s})()};V(["click"]);var kt=S('<div class=atk-auth-plugin-dialog-wrap><div class=atk-auth-plugin-dialog><div class="atk-view-wrap atk-slim-scrollbar">');const Pe=e=>{const o=e,{showBackBtn:t,onBack:n,onClose:i,title:l}=o,s=be(o,["showBackBtn","onBack","onClose","title"]);return(()=>{var r=kt(),a=r.firstChild,u=a.firstChild;return g(a,x(bt,{title:l,showBackBtn:t,onBack:n,onClose:i}),u),g(u,()=>{var f;return(f=s.children)==null?void 0:f.call(s)}),g(r,()=>{var f;return(f=s.extras)==null?void 0:f.call(s)},null),P(()=>R(a,"data-dialog-name",e.name)),r})()};let Ee=null,he=null;const Te=()=>{Ee&&clearInterval(Ee),he&&window.removeEventListener("message",he)},yt=(e,t)=>{Te();const n=1020,i=618,l=(window.innerWidth-n)/2,s=(window.innerHeight-i)/2,o=window.open(t,"_blank",`width=${n},height=${i},left=${l},top=${s},scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no`);return new Promise((r,a)=>{Ee=setInterval(()=>{if(o!=null&&o.closed){Te(),a(new Error("Login canceled"));return}o==null||o.postMessage({type:"ATK_LOGIN"},"*")},1e3),he=({data:u})=>{u.type==="ATK_AUTH_CALLBACK"&&u.payload&&(Te(),o==null||o.close(),r({token:u.payload}))},window.addEventListener("message",he)})},Ye=(e,{user:t,token:n})=>{e.get("user").update(Be(le({},t),{token:n}))},Xe=(e,t)=>{e.get("user").update({token:t}),e.getApi().user.getUser().then(n=>{const{user:i}=n.data;e.get("user").update({name:i.name,email:i.email,link:i.link,is_admin:i.is_admin})})};var _t=S("<div class=atk-methods>"),At=S('<div class="atk-method-item atk-fade-in"><div class=atk-method-icon></div><div class=atk-method-text>'),Ct=S('<div class="atk-method-item atk-methods-loading atk-fade-in"><div class=atk-method-icon></div><div class=atk-method-text>'),St=S("<div class=atk-methods-page>");const Pt=e=>{const{ctx:t,methods:n}=e,[i,l]=B(!0);e.changeTitle(t.$t("signIn"));const s=r=>{r.onClick?r.onClick():r.link&&te(this,null,function*(){const a=/^(http|https):\/\//.test(r.link)?r.link:`${t.getConf().server}${r.link}`,{token:u}=yield yt(t,a);Xe(t,u),e.onComplete()})};Ue(()=>{var r,a;if((r=n())!=null&&r.length?l(!1):l(!0),((a=n())==null?void 0:a.length)===1){const u=n()[0];s(u)}});const o=(()=>{var r=_t();return g(r,x($t,{get each(){return n()},children:a=>(()=>{var u=At(),f=u.firstChild,c=f.nextSibling;return u.$$click=()=>s(a),g(c,()=>a.label),P(d=>{var $=a.name,m=`url('${a.icon}')`;return $!==d.e&&R(u,"data-method",d.e=$),m!==d.t&&((d.t=m)!=null?f.style.setProperty("background-image",m):f.style.removeProperty("background-image")),d},{e:void 0,t:void 0}),u})()}),null),g(r,(()=>{var a=j(()=>!!i());return()=>a()&&[...Array(3)].map((u,f)=>Ct())})(),null),r})();return(()=>{var r=St();return g(r,o),r})()};V(["click"]);const xe=Symbol("store-raw"),z=Symbol("store-node"),F=Symbol("store-has"),Ze=Symbol("store-self");function Qe(e){let t=e[b];if(!t&&(Object.defineProperty(e,b,{value:t=new Proxy(e,xt)}),!Array.isArray(e))){const n=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let l=0,s=n.length;l<s;l++){const o=n[l];i[o].get&&Object.defineProperty(e,o,{enumerable:i[o].enumerable,get:i[o].get.bind(t)})}}return t}function $e(e){let t;return e!=null&&typeof e=="object"&&(e[b]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ne(e,t=new Set){let n,i,l,s;if(n=e!=null&&e[xe])return n;if(!$e(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,r=e.length;o<r;o++)l=e[o],(i=ne(l,t))!==l&&(e[o]=i)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let a=0,u=o.length;a<u;a++)s=o[a],!r[s].get&&(l=e[s],(i=ne(l,t))!==l&&(e[s]=i))}return e}function me(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function ie(e,t,n){if(e[t])return e[t];const[i,l]=B(n,{equals:!1,internal:!0});return i.$=l,e[t]=i}function Et(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===b||t===z||(delete n.value,delete n.writable,n.get=()=>e[b][t]),n}function Je(e){ye()&&ie(me(e,z),Ze)()}function Tt(e){return Je(e),Reflect.ownKeys(e)}const xt={get(e,t,n){if(t===xe)return e;if(t===b)return n;if(t===H)return Je(e),n;const i=me(e,z),l=i[t];let s=l?l():e[t];if(t===z||t===F||t==="__proto__")return s;if(!l){const o=Object.getOwnPropertyDescriptor(e,t);ye()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(s=ie(i,t,s)())}return $e(s)?Qe(s):s},has(e,t){return t===xe||t===b||t===H||t===z||t===F||t==="__proto__"?!0:(ye()&&ie(me(e,F),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Tt,getOwnPropertyDescriptor:Et};function pe(e,t,n,i=!1){if(!i&&e[t]===n)return;const l=e[t],s=e.length;n===void 0?(delete e[t],e[F]&&e[F][t]&&l!==void 0&&e[F][t].$()):(e[t]=n,e[F]&&e[F][t]&&l===void 0&&e[F][t].$());let o=me(e,z),r;if((r=ie(o,t,l))&&r.$(()=>n),Array.isArray(e)&&e.length!==s){for(let a=e.length;a<s;a++)(r=o[a])&&r.$();(r=ie(o,"length",s))&&r.$(e.length)}(r=o[Ze])&&r.$()}function ze(e,t){const n=Object.keys(t);for(let i=0;i<n.length;i+=1){const l=n[i];pe(e,l,t[l])}}function Lt(e,t){if(typeof t=="function"&&(t=t(e)),t=ne(t),Array.isArray(t)){if(e===t)return;let n=0,i=t.length;for(;n<i;n++){const l=t[n];e[n]!==l&&pe(e,n,l)}pe(e,"length",i)}else ze(e,t)}function se(e,t,n=[]){let i,l=e;if(t.length>1){i=t.shift();const o=typeof i,r=Array.isArray(e);if(Array.isArray(i)){for(let a=0;a<i.length;a++)se(e,[i[a]].concat(t),n);return}else if(r&&o==="function"){for(let a=0;a<e.length;a++)i(e[a],a)&&se(e,[a].concat(t),n);return}else if(r&&o==="object"){const{from:a=0,to:u=e.length-1,by:f=1}=i;for(let c=a;c<=u;c+=f)se(e,[c].concat(t),n);return}else if(t.length>1){se(e[i],t,[i].concat(n));return}l=e[i],n=[i].concat(n)}let s=t[0];typeof s=="function"&&(s=s(l,n),s===l)||i===void 0&&s==null||(s=ne(s),i===void 0||$e(l)&&$e(s)&&!Array.isArray(s)?ze(l,s):pe(e,i,s))}function we(...[e,t]){const n=ne(e||{}),i=Array.isArray(n),l=Qe(n);function s(...o){ot(()=>{i&&o.length===1?Lt(n,o[0]):se(n,o)})}return[l,s]}var Dt=S("<div class=atk-login-page><form class=atk-form><input type=email name=email required><input type=password name=password required><button type=submit></button><div class=atk-form-bottom> <span class=atk-link>");const Ot=e=>{const{ctx:t,onRegisterNowClick:n}=e;e.changeTitle(t.$t("signIn"));const[i,l]=we({email:"",password:""}),s=o=>{o.preventDefault(),t.getApi().auth.loginByEmail(i).then(r=>{Ye(t,r.data),e.onComplete()}).catch(r=>{alert(r.message)})};return(()=>{var o=Dt(),r=o.firstChild,a=r.firstChild,u=a.nextSibling,f=u.nextSibling,c=f.nextSibling,d=c.firstChild,$=d.nextSibling;return r.addEventListener("submit",s),a.$$input=m=>l("email",m.target.value.trim()),u.$$input=m=>l("password",m.target.value.trim()),g(f,()=>t.$t("signIn")),g(c,()=>t.$t("noAccountPrompt"),d),$.$$click=()=>n(),g($,()=>t.$t("signUp")),P(m=>{var _=t.$t("email"),w=t.$t("password");return _!==m.e&&R(a,"placeholder",m.e=_),w!==m.t&&R(u,"placeholder",m.t=w),m},{e:void 0,t:void 0}),o})()};V(["input","click"]);var Bt=S('<div class="atk-send-verify-btn atk-input-grp-btn">');const Le=e=>{const{ctx:t,onSend:n,getEmail:i}=e,[l,s]=B(t.$t("verifySend")),o=60;let r=!1,a=null,u=o;const f=()=>{a&&clearInterval(a),a=null,r=!1,u=o},c=()=>te(this,null,function*(){if(!r){r=!0;try{yield t.getApi().auth.sendVerifyEmail({email:i()}),a&&clearInterval(a),a=setInterval(()=>{if(u<=0){f(),s(t.$t("verifyResend"));return}u--,s(t.$t("waitSeconds",{seconds:`${u}`}))},1e3),n==null||n()}catch(d){r=!1,alert(d.message)}}});return(()=>{var d=Bt();return d.$$click=c,g(d,l),d})()};V(["click"]);var Ht=S("<input type=text name=username required>"),Ut=S("<input type=password name=password required>"),It=S("<input type=password name=re_password required>"),Nt=S("<div class=atk-register-page><form class=atk-form><input type=email name=email required><div class=atk-input-grp><input type=text name=code required></div><button type=submit></button><div class=atk-form-bottom> <span class=atk-link></span> | <span>"),et=S("<span class=atk-link>");const Mt=e=>{const{ctx:t,onLoginNowClick:n}=e,[i,l]=B("register"),[s,o]=we({email:"",code:"",username:"",password:""});Ue(()=>{i()==="register"?e.changeTitle(t.$t("signUp")):e.changeTitle(t.$t("resetPassword")),o({email:"",code:"",username:"",password:""})});const r=a=>{a.preventDefault();const u=i()==="register"?{email:s.email,code:s.code,name:s.username,password:s.password}:{email:s.email,code:s.code,password:s.password};t.getApi().auth.registerByEmail(u).then(f=>{i()==="register"?(Ye(t,f.data),e.onComplete()):n()}).catch(f=>{alert(f.message)})};return(()=>{var a=Nt(),u=a.firstChild,f=u.firstChild,c=f.nextSibling,d=c.firstChild,$=c.nextSibling,m=$.nextSibling,_=m.firstChild,w=_.nextSibling,k=w.nextSibling,L=k.nextSibling;return u.addEventListener("submit",r),g(u,x(Ae,{get when(){return i()==="register"},get children(){return[(()=>{var h=Ht();return h.$$input=p=>o("username",p.target.value.trim()),P(()=>R(h,"placeholder",t.$t("username"))),P(()=>h.value=s.username),h})(),(()=>{var h=Ut();return h.$$input=p=>o("password",p.target.value.trim()),P(()=>R(h,"placeholder",t.$t("password"))),P(()=>h.value=s.password),h})()]}}),f),f.$$input=h=>o("email",h.target.value.trim()),d.$$input=h=>o("code",h.target.value.trim()),g(c,x(Le,{ctx:t,getEmail:()=>s.email}),null),g(u,x(Ae,{get when(){return i()==="forget"},get children(){var h=It();return h.$$input=p=>o("password",p.target.value.trim()),P(()=>R(h,"placeholder",t.$t("resetPassword"))),P(()=>h.value=s.password),h}}),$),g($,()=>t.$t("nextStep")),g(m,()=>t.$t("haveAccountPrompt"),_),w.$$click=()=>n(),g(w,()=>t.$t("signIn")),g(L,(()=>{var h=j(()=>i()==="register");return()=>h()&&(()=>{var p=et();return p.$$click=()=>l("forget"),g(p,()=>t.$t("forgetPassword")),p})()})(),null),g(L,(()=>{var h=j(()=>i()==="forget");return()=>h()&&(()=>{var p=et();return p.$$click=()=>l("register"),g(p,()=>t.$t("signUp")),p})()})(),null),P(h=>{var p=t.$t("email"),U=t.$t("verificationCode");return p!==h.e&&R(f,"placeholder",h.e=p),U!==h.t&&R(d,"placeholder",h.t=U),h},{e:void 0,t:void 0}),P(()=>f.value=s.email),P(()=>d.value=s.code),a})()};V(["input","click"]);const De=e=>{const t=e.get("layerManager").create("login");return{show:i=>{const l=document.createElement("div");Ge(()=>i(t),l),t.getEl().append(l.firstChild),t.show()}}};var jt=S('<div class=atk-dialog-footer><div class="atk-btn atk-btn-no"></div><div class="atk-btn atk-btn-yes">');const qt=e=>(()=>{var t=jt(),n=t.firstChild,i=n.nextSibling;return Ce(n,"click",e.onNo),g(n,()=>e.noText),i.$$click=()=>{var l,s;return!((l=e.yesDisabled)!=null&&l.call(e))&&((s=e.onYes)==null?void 0:s.call(e))},g(i,()=>e.yesText),P(()=>{var l;return i.classList.toggle("disabled",!!((l=e.yesDisabled)!=null&&l.call(e)))}),t})();V(["click"]);var Vt=S("<div class=atk-merge-confirm-page><div class=atk-text></div><div class=atk-usernames></div><div class=atk-text>"),Rt=S("<div class=atk-item><div class=atk-username>");const Ft=e=>{const{usernames:t,ctx:n,onClose:i}=e,[l,s]=B(""),o=a=>{s(l()!==a?a:"")},r=()=>{n.getApi().auth.applyDataMerge({user_name:l()}).then(({data:a})=>{Xe(n,a.user_token),i()})};return(()=>{var a=Vt(),u=a.firstChild,f=u.nextSibling,c=f.nextSibling;return g(u,()=>n.$t("accountMergeNotice")),g(f,()=>t.map(d=>(()=>{var $=Rt(),m=$.firstChild;return $.$$click=()=>o(d),g(m,d),P(()=>$.classList.toggle("active",l()===d)),$})())),g(c,(()=>{var d=j(()=>!l());return()=>d()?n.$t("accountMergeSelectOne"):n.$t("accountMergeConfirm",{id:l()})})()),g(a,x(qt,{get noText(){return n.$t("dismiss")},get yesText(){return n.$t("merge")},onNo:()=>{i()},onYes:()=>{r()},yesDisabled:()=>!l()}),null),a})()};V(["click"]);const Kt=e=>{const a=e,{ctx:t,onClose:n}=a,i=be(a,["ctx","onClose"]),l={confirm:()=>x(Ft,{get usernames(){return e.usernames},ctx:t,onClose:n})},s="confirm",[o,r]=B(s);return x(Pe,{name:"merge",onClose:n,title:()=>"Merge Tool",children:()=>l[o()]()})},Gt=e=>te(this,null,function*(){const{data:t}=yield e.getApi().conf.getSocialLoginProviders();return t.providers.map(({name:n,label:i,icon:l,path:s})=>({name:n,label:i,icon:l,link:s})).sort((n,i)=>n.name==="email"?-1:i.name==="email"||n.name==="skip"?1:i.name==="skip"?-1:n.label.localeCompare(i.label))}),Wt=e=>{const _=e,{ctx:t,onClose:n,onSkip:i}=_,l=be(_,["ctx","onClose","onSkip"]),[s]=Ie(()=>te(this,null,function*(){return Gt(t).then(w=>w.map(k=>(k.name==="email"&&(k.onClick=()=>d("login")),k.name==="skip"&&(k.label=t.$t("skipVerify"),k.onClick=()=>{i(),n()}),k))).catch(w=>(alert("Failed to fetch login methods: "+w.message),n(),[]))})),[o,r]=B("Login"),a=()=>{n(),t.get("editor").getUI().$header.style.display="none",t.getApi().auth.checkDataMerge().then(({data:w})=>{w.need_merge&&setTimeout(()=>{De(t).show(k=>x(Kt,{ctx:t,onClose:()=>k.destroy(),get usernames(){return w.user_names}}))},500)})},u={methods:()=>x(Pt,{ctx:t,methods:s,changeTitle:r,onComplete:a}),login:()=>x(Ot,{ctx:t,onRegisterNowClick:()=>d("register"),changeTitle:r,onComplete:a}),register:()=>x(Mt,{ctx:t,onLoginNowClick:()=>d("login"),changeTitle:r,onComplete:a})},f="methods",[c,d]=B(f);return x(Pe,{showBackBtn:()=>{var w;return c()!==f&&!(c()=="login"&&((w=s())==null?void 0:w.length)===1)},onBack:()=>{d(f)},onClose:n,title:o,children:()=>u[c()]()})};var Yt=S("<div><form class=atk-form><label></label><input type=text name=name required><label></label><input type=email name=email required><label></label><input type=text name=link><button type=submit></button><div class=atk-form-bottom><span class=atk-link>"),Xt=S("<label>"),Zt=S("<div class=atk-input-grp><input type=text name=code required>"),Qt=S("<div><form class=atk-form><label></label><div class=atk-input-grp><input type=text name=code required></div><label></label><input type=password name=newPassword required><label></label><input type=password name=newPassword2 required><button type=submit>");const Jt=e=>{const{ctx:t,onClose:n}=e,[i,l]=B(""),[s]=Ie(()=>te(this,null,function*(){const{data:d}=yield t.getApi().user.getUser();if(!d.is_login)throw t.get("user").logout(),n(),new Error("No login");return Be(le({},d.user),{token:""})})),o={basic:()=>zt(t,()=>u("password"),l,s,n),password:()=>en(t,l,s,n)},r="basic",[a,u]=B(r);return x(Pe,{showBackBtn:()=>a()!==r,onBack:()=>u(r),onClose:n,title:i,children:()=>o[a()]()})},zt=(e,t,n,i,l)=>{var u,f,c;n(e.$t("userProfile"));const[s,o]=we({name:((u=i())==null?void 0:u.name)||"",email:((f=i())==null?void 0:f.email)||"",link:((c=i())==null?void 0:c.link)||"",code:""}),r=()=>{var d;return!i.loading&&s.email!==((d=i())==null?void 0:d.email)},a=d=>{d.preventDefault(),e.getApi().user.updateProfile(le({},s)).then(({data:{user:$}})=>{e.get("user").update($),l()}).catch($=>{window.alert($.message)})};return(()=>{var d=Yt(),$=d.firstChild,m=$.firstChild,_=m.nextSibling,w=_.nextSibling,k=w.nextSibling,L=k.nextSibling,h=L.nextSibling,p=h.nextSibling,U=p.nextSibling,Y=U.firstChild;return $.addEventListener("submit",a),g(m,()=>e.$t("nick")),_.$$input=N=>o("name",N.target.value.trim()),g(w,()=>e.$t("email")),k.$$input=N=>{o("code",""),o("email",N.target.value.trim())},g($,(()=>{var N=j(()=>!!r());return()=>N()&&[(()=>{var y=Xt();return g(y,()=>e.$t("verificationCode")),y})(),(()=>{var y=Zt(),E=y.firstChild;return E.$$input=T=>o("code",T.target.value.trim()),g(y,x(Le,{ctx:e,getEmail:()=>s.email||""}),null),P(()=>E.value=s.code),y})()]})(),L),g(L,()=>e.$t("link")),h.$$input=N=>o("link",N.target.value.trim()),g(p,()=>e.$t("save")),Ce(Y,"click",t),g(Y,()=>e.$t("changePassword")),P(()=>_.value=s.name),P(()=>k.value=s.email),P(()=>h.value=s.link),d})()},en=(e,t,n,i)=>{t(e.$t("changePassword"));const[l,s]=we({code:"",newPassword:"",newPassword2:""}),o=r=>{var a,u;if(r.preventDefault(),l.newPassword!==l.newPassword2){window.alert(e.$t("passwordMismatch"));return}e.getApi().auth.registerByEmail({name:((a=n())==null?void 0:a.name)||"",email:((u=n())==null?void 0:u.email)||"",password:l.newPassword,code:l.code}).then(f=>{e.get("user").logout(),i()}).catch(f=>{alert(f.message)})};return(()=>{var r=Qt(),a=r.firstChild,u=a.firstChild,f=u.nextSibling,c=f.firstChild,d=f.nextSibling,$=d.nextSibling,m=$.nextSibling,_=m.nextSibling,w=_.nextSibling;return a.addEventListener("submit",o),g(u,()=>e.$t("verificationCode")),c.$$input=k=>s("code",k.target.value.trim()),g(f,x(Le,{ctx:e,getEmail:()=>n().email}),null),g(d,()=>e.$t("password")),$.$$input=k=>s("newPassword",k.target.value.trim()),g(m,()=>e.$t("confirmPassword")),_.$$input=k=>s("newPassword2",k.target.value.trim()),g(w,()=>e.$t("nextStep")),P(()=>c.value=l.code),r})()};V(["input","click"]);var tn=S('<div class=atk-editor-user><div class="atk-user-profile-btn atk-user-btn"><div class=atk-name></div></div><div class="atk-logout atk-user-btn"aria-label=Logout><svg stroke=currentColor fill=currentColor height=1em width=1em stroke-width=0 viewBox="-6 -6 36 36"xmlns=http://www.w3.org/2000/svg><path d="M5 22C4.44772 22 4 21.5523 4 21V3C4 2.44772 4.44772 2 5 2H19C19.5523 2 20 2.44772 20 3V6H18V4H6V20H18V18H20V21C20 21.5523 19.5523 22 19 22H5ZM18 16V13H11V11H18V8L23 12L18 16Z">'),nn=S("<div class=atk-editor-user-wrap>");const sn=({ctx:e})=>{const t=()=>{window.confirm(e.$t("logoutConfirm"))&&e.get("user").update({token:"",name:"",email:"",link:"",is_admin:!1})},n=()=>le({},e.get("user").getData()),[i,l]=B(n()),s=r=>{l(n())};e.on("user-changed",s),Ne(()=>{e.off("user-changed",s)});const o=()=>{De(e).show(r=>x(Jt,{ctx:e,onClose:()=>r.destroy()}))};return(()=>{var r=nn();return g(r,x(Ae,{get when(){return i().token},get children(){var a=tn(),u=a.firstChild,f=u.firstChild,c=u.nextSibling;return u.$$click=o,g(f,()=>i().name),c.$$click=t,a}})),r})()},ln=e=>{const t=e.get("editor");if(!t.getEl().querySelector(".atk-editor-user-wrap")){const i=document.createElement("div");Ge(()=>x(sn,{ctx:e}),i),t.getUI().$header.after(i)}};V(["click"]);const Oe=e=>{e.getApiHandlers().add("need_auth_login",()=>{throw l(),new Error("Login required")});let t=!1;const n=()=>{e.get("editor").getUI().$submitBtn.innerText=e.get("user").getData().token||t?e.conf.sendBtn||e.$t("send"):e.$t("signIn")};e.watchConf(["locale","sendBtn"],()=>n()),e.on("user-changed",()=>n()),e.on("mounted",()=>{e.get("editor").getUI().$header.style.display="none",ln(e)});const i=()=>{e.get("editor").getUI().$header.style.display="",e.get("editor").getUI().$name.focus(),e.updateConf({beforeSubmit:void 0}),t=!0,n()},l=()=>{De(e).show(s=>x(Wt,{ctx:e,onClose:()=>s.destroy(),onSkip:i}))};e.updateConf({beforeSubmit:(s,o)=>{e.get("user").getData().token?o():l()}})};typeof window!="undefined"&&(!window.ArtalkPlugins&&(window.ArtalkPlugins={}),window.ArtalkPlugins.ArtalkAuthPlugin=Oe,(tt=window.Artalk)==null||tt.use(Oe)),v.ArtalkAuthPlugin=Oe,Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})});
